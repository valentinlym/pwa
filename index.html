<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta httpEquiv="X-UA-Compatible" content="IE=edge" />
  <!-- 
      This viewport works for phones with notches.
      It's optimized for gestures by disabling global zoom.
     -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1.00001, viewport-fit=cover" />
  <link rel="manifest" href="/site.webmanifest">
  <title>educentre</title>
  <style>
    /**
       * Extend the react-native-web reset:
       * https://github.com/necolas/react-native-web/blob/master/packages/react-native-web/src/exports/StyleSheet/initialRules.js
       */
    html,
    body,
    #root {
      width: 100%;
      /* To smooth any scrolling behavior */
      -webkit-overflow-scrolling: touch;
      margin: 0px;
      padding: 0px;
      /* Allows content to fill the viewport and go beyond the bottom */
      min-height: 100%;
    }

    #root {
      flex-shrink: 0;
      flex-basis: auto;
      flex-grow: 1;
      display: flex;
      flex: 1;
    }

    html {
      scroll-behavior: smooth;
      /* Prevent text size change on orientation change https://gist.github.com/tfausak/2222823#file-ios-8-web-app-html-L138 */
      -webkit-text-size-adjust: 100%;
      height: calc(100% + env(safe-area-inset-top));
    }

    body {
      display: flex;
      /* Allows you to scroll below the viewport; default value is visible */
      flex-direction: column;
      overflow-y: auto;
      overscroll-behavior-y: none;
      text-rendering: optimizeLegibility;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      -ms-overflow-style: scrollbar;
    }

    /* Enable for apps that support dark-theme */
    /*@media (prefers-color-scheme: dark) {
        body {
          background-color: black;
        }
      }*/
  </style>
</head>

<body>
  <!-- 
      A generic no script element with a reload button and a message.
      Feel free to customize this however you'd like.
    -->
  <div id="installBox"
    style="display: none;flex-direction: columns;padding: 16px; justify-content: space-between;align-items: center;">
    <div class="left" style="display: flex;gap: 16px;align-items: center" ;>
      <img src="favicon.png" style="width: 48px;border: #19ADF4 solid .5px;border-radius: 8px;" class="icon"
        alt="Logo d'Educentre">
      <div style="display: flex;gap: 4px;flex-direction: column;">
        <p style="font-weight: bold;font-family: sans-serif;font-size: 14px;margin: 0;">Educentre</p>
        <p style="font-family: sans-serif;font-size: 14px;margin: 0;color: #6C757D;">Installer l'application Educentre
        </p>
      </div>
    </div>
    <button id="installButton" style=" background: #19ADF4;
    border-radius: 8px;
    border: none;
    color: white;
    padding: 8px 16px;
    font-weight: bold;
    cursor: pointer;">Installer</button>
  </div>
  <noscript>
    <form action="" style="
          background-color: #fff;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 9999;
        ">
      <div style="
            font-size: 18px;
            font-family: Helvetica, sans-serif;
            line-height: 24px;
            margin: 10%;
            width: 80%;
          ">
        <p>Oh no! It looks like JavaScript is not enabled in your browser.</p>
        <p style="margin: 20px 0;">
          <button type="submit" style="
                background-color: #4630eb;
                border-radius: 100px;
                border: none;
                box-shadow: none;
                color: #fff;
                cursor: pointer;
                font-weight: bold;
                line-height: 20px;
                padding: 6px 16px;
              ">
            Reload
          </button>
        </p>
      </div>
    </form>
  </noscript>
  <!-- The root element for your Expo app. -->
  <div id="root"></div>
  <script>
    if (navigator.userAgent.includes("Chrome")) {
      document.querySelector("#installBox").style.display = "flex";
    }
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent the mini-infobar from appearing on mobile
      e.preventDefault();
      // Stash the event so it can be triggered later.
      deferredPrompt = e;
      // Update UI to notify the user they can install the PWA
      showInstallPromotion();
    });

    function showInstallPromotion() {
      const installButton = document.getElementById('installButton');
      installButton.style.display = 'block';
      installButton.addEventListener('click', handleInstallButtonClick);
    }

    function handleInstallButtonClick() {
      // Show the install prompt
      deferredPrompt.prompt();
      // Wait for the user to respond to the prompt
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the install prompt');
        } else {
          console.log('User dismissed the install prompt');
        }
        deferredPrompt = null;
      });
    }

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/service-worker.js').then(function (registration) {
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
        }, function (err) {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }
  </script>
  <script src="/bundles/web-428cd413e229a9ddbe03faf29b55e1ef.js" defer></script>
</body>

</html>